{% comment %} ... 前面的图片提取代码不变 ... {% endcomment %}

<div class="{{ include.type | default: 'list' }}__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"{% if post.locale %} lang="{{ post.locale }}"{% endif %}>
    
    {% if include.type == "grid" and teaser %}
      <div class="archive__item-teaser">
        <img src="{{ teaser | relative_url }}" alt="{{ title }}">
      </div>
    {% endif %}
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      {% if post.link %}
        <a href="{{ post.link }}">{{ title }}</a> 
        <a href="{{ post.url | relative_url }}" rel="permalink">
          <i class="fas fa-link" aria-hidden="true" title="permalink"></i>
          <span class="sr-only">Permalink</span>
        </a>
      {% else %}
        <a href="{{ post.url | relative_url }}" rel="permalink">{{ title }}</a>
      {% endif %}
    </h2>
    
    {% include page__meta.html type=include.type %}
    
    {% comment %} 摘要内容 {% endcomment %}
    <div class="archive__item-excerpt" itemprop="description">
      {% comment %} 列表布局：图片+摘要 {% endcomment %}
      {% if include.type == "list" %}
        {% if teaser %}
          <div class="excerpt-leading-image">
            <a href="{{ post.url | relative_url }}">
              <img src="{{ teaser | relative_url }}" 
                   alt="{{ title }}"
                   loading="lazy">
            </a>
          </div>
        {% endif %}
      {% endif %}
      
      {% if post.excerpt %}
        {{ post.excerpt | markdownify | strip_html | truncate: 160 }}
      {% endif %}
    </div>
    
  </article>
</div>

<style>
.archive__item-teaser img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 6px;
  margin-bottom: 15px;
}

/* 摘要区域 */
.archive__item-excerpt {
  margin-top: 10px;
  color: #444;
  line-height: 1.6;
}

/* 摘要开头的图片 */
.excerpt-leading-image {
  margin-bottom: 15px;
}

.excerpt-leading-image a {
  display: block;
  border-radius: 6px;
  overflow: hidden;
}

.excerpt-leading-image img {
  width: 100%;
  height: auto;
  max-height: 200px;
  object-fit: cover;
  transition: transform 0.3s;
}

.excerpt-leading-image:hover img {
  transform: scale(1.02);
}

/* 移动端调整 */
@media (max-width: 768px) {
  .excerpt-leading-image img {
    max-height: 150px;
  }
}
</style>